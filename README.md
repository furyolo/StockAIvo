# StockAIvo - æ™ºèƒ½ç¾è‚¡æ•°æ®ä¸åˆ†æå¹³å°

ä¸€ä¸ªç°ä»£åŒ–çš„å…¨æ ˆç¾è‚¡åˆ†æå¹³å°ï¼Œé›†æˆå®æ—¶æ•°æ®æŸ¥è¯¢ã€TradingViewå›¾è¡¨å±•ç¤ºå’Œå¤šAgentååŒçš„AIæŠ•èµ„åˆ†æã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚â”€â”€â”€â”€â”‚  åç«¯ (FastAPI)  â”‚â”€â”€â”€â”€â”‚  æ•°æ®æº (AKShare) â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ TradingView   â”‚    â”‚ â€¢ æ•°æ®æœåŠ¡       â”‚    â”‚ â€¢ ç¾è‚¡å®æ—¶æ•°æ®   â”‚
â”‚ â€¢ è‚¡ç¥¨æœç´¢      â”‚    â”‚ â€¢ AIåˆ†æå¼•æ“     â”‚    â”‚ â€¢ å†å²Kçº¿æ•°æ®    â”‚
â”‚ â€¢ AIåˆ†æå±•ç¤º    â”‚    â”‚ â€¢ ç¼“å­˜ç®¡ç†       â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Redis (ç¼“å­˜)    â”‚  â”‚ PostgreSQL     â”‚
            â”‚ â€¢ çƒ­ç‚¹æ•°æ®ç¼“å­˜  â”‚  â”‚ â€¢ è‚¡ç¥¨åŸºç¡€ä¿¡æ¯  â”‚
            â”‚ â€¢ å¾…ä¿å­˜æ•°æ®    â”‚  â”‚ â€¢ å†å²ä»·æ ¼æ•°æ®  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ï¿½ æ™ºèƒ½æ•°æ®ç®¡ç†
- **ä¸‰çº§ç¼“å­˜ç­–ç•¥**: Redis â†’ PostgreSQL â†’ AKShareï¼Œç¡®ä¿é«˜æ•ˆå¯é çš„æ•°æ®è·å–
- **å¤šæ—¶é—´ç²’åº¦**: æ”¯æŒæ—¥çº¿ã€å‘¨çº¿ã€å°æ—¶çº¿æ•°æ®
- **æ™ºèƒ½æ•°æ®è¡¥å…¨**: è‡ªåŠ¨æ£€æµ‹å¹¶è¡¥å…¨ç¼ºå¤±æ•°æ®
- **äº¤æ˜“æ—¥å†æ„ŸçŸ¥**: åŸºäºNYSEäº¤æ˜“æ—¥å†çš„æ™ºèƒ½æ—¥æœŸå¤„ç†

### ğŸ¤– AIåˆ†æå¼•æ“
- **å¤šAgentååŒ**: åŸºäºLangGraphçš„åˆ†å¸ƒå¼AIåˆ†ææ¶æ„
- **æµå¼åˆ†æ**: å®æ—¶æµå¼è¾“å‡ºåˆ†æç»“æœ
- **å¤šç»´åº¦åˆ†æ**: æŠ€æœ¯é¢ã€åŸºæœ¬é¢ã€æƒ…æ„Ÿé¢ç»¼åˆåˆ†æ
- **è‡ªå®šä¹‰æ—¶é—´èŒƒå›´**: çµæ´»çš„åˆ†ææ—¶é—´çª—å£è®¾ç½®

### ğŸ¨ ç°ä»£åŒ–ç•Œé¢
- **ä¸“ä¸šå›¾è¡¨**: åŸºäºTradingView Lightweight Chartsçš„Kçº¿å›¾è¡¨ï¼Œæ”¯æŒå®æ—¶OHLCæ•°æ®æ˜¾ç¤º
- **æ™ºèƒ½æœç´¢**: è‚¡ç¥¨ä»£ç ã€å…¬å¸åç§°çš„æ¨¡ç³ŠåŒ¹é…å’Œå®æ—¶å»ºè®®
- **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **ä¸€è‡´æ€§ä½“éªŒ**: å›¾è¡¨Kçº¿ä¸OHLCä¿¡æ¯é¢œè‰²é€»è¾‘ç»Ÿä¸€ï¼Œå®Œæ•´æ˜¾ç¤ºä»·æ ¼å˜åŒ–å’Œç™¾åˆ†æ¯”

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

**åç«¯**: Python 3.12 + FastAPI + PostgreSQL + Redis + LangGraph  
**å‰ç«¯**: React 19 + TypeScript + Vite + TailwindCSS + shadcn/ui  
**AI**: LangGraph + LangChain + Google Gemini  
**æ•°æ®**: AKShare + pandas-market-calendars  
**å·¥å…·**: uv (Python) + pnpm (Node.js) + MyPy + ESLint

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
Python 3.12+ â€¢ Node.js 18+ â€¢ PostgreSQL 12+ â€¢ Redis 6+

### å®‰è£…éƒ¨ç½²

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/StockAIvo.git
cd StockAIvo

# 2. é…ç½®ç¯å¢ƒå˜é‡ (.env)
DATABASE_URL="postgresql://postgres:password@localhost:5432/stockaivo"
REDIS_URL="redis://localhost:6379"
GEMINI_API_KEY="your_google_api_key"

# 3. å®‰è£…åç«¯ä¾èµ–
uv sync --extra dev

# 4. å®‰è£…å‰ç«¯ä¾èµ–
cd frontend && pnpm install

# 5. å¯åŠ¨æœåŠ¡
# åç«¯ (ç»ˆç«¯1)
uv run dev  # http://127.0.0.1:8000

# å‰ç«¯ (ç»ˆç«¯2)
cd frontend && pnpm dev  # http://localhost:5173
```

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ [CONFIGURATION.md](CONFIGURATION.md)

## ğŸ“š API æ–‡æ¡£

### ä¸»è¦ç«¯ç‚¹

```http
# è‚¡ç¥¨æ•°æ®
GET /stocks/{ticker}/daily?start_date=2024-01-01&end_date=2024-12-31
GET /stocks/{ticker}/weekly
GET /stocks/{ticker}/hourly

# è‚¡ç¥¨æœç´¢
GET /search/stocks?q=apple
GET /search/stocks/suggestions?q=app

# AIåˆ†æ (æ”¯æŒæµå¼å“åº”)
POST /ai/analyze
{
  "ticker": "AAPL",
  "date_range_option": "3m"
}

# ç³»ç»Ÿç›‘æ§
GET /health              # å¥åº·æ£€æŸ¥
GET /cache-stats         # ç¼“å­˜ç»Ÿè®¡
POST /persist-data       # æ‰‹åŠ¨æ•°æ®æŒä¹…åŒ–
```

å®Œæ•´APIæ–‡æ¡£: `http://127.0.0.1:8000/docs`

## ğŸ“ é¡¹ç›®ç»“æ„

```
StockAIvo/
â”œâ”€â”€ frontend/                   # Reactå‰ç«¯
â”‚   â”œâ”€â”€ src/components/         # UIç»„ä»¶
â”‚   â””â”€â”€ ...
â”œâ”€â”€ stockaivo/                  # åç«¯æ ¸å¿ƒ
â”‚   â”œâ”€â”€ ai/                     # AIåˆ†æå¼•æ“
â”‚   â”œâ”€â”€ routers/                # APIè·¯ç”±
â”‚   â”œâ”€â”€ dependencies.py         # ä¾èµ–æ³¨å…¥
â”‚   â”œâ”€â”€ exceptions.py           # å¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ middleware.py           # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ data_service.py         # æ•°æ®æœåŠ¡
â”‚   â”œâ”€â”€ search_service.py       # æœç´¢æœåŠ¡
â”‚   â””â”€â”€ ...
â”œâ”€â”€ tests/                      # æµ‹è¯•ä»£ç 
â”œâ”€â”€ database_migrations/        # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ main.py                     # åº”ç”¨å…¥å£
â””â”€â”€ pyproject.toml              # é¡¹ç›®é…ç½®
```

## ğŸ§ª æµ‹è¯• & å¼€å‘

```bash
# è¿è¡Œæµ‹è¯•
uv run pytest tests/ -v

# ç±»å‹æ£€æŸ¥
uv run mypy stockaivo/

# å‰ç«¯æµ‹è¯•
cd frontend && pnpm test

# è°ƒè¯•æŠ€å·§
export LOG_LEVEL=DEBUG
uv run dev

# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
curl http://127.0.0.1:8000/health
curl http://127.0.0.1:8000/cache-stats
```

### æ¶æ„æœ€ä½³å®è·µ
- **ä¾èµ–æ³¨å…¥**: ä½¿ç”¨ `DatabaseDep` ç­‰ç±»å‹åˆ«å
- **å¼‚å¸¸å¤„ç†**: ä½¿ç”¨ `ValidationException`ã€`DataServiceException` ç­‰è‡ªå®šä¹‰å¼‚å¸¸
- **ä¸­é—´ä»¶**: å¯é…ç½®çš„è¯·æ±‚æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ã€å®‰å…¨å¤´
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ MyPy ç±»å‹æ£€æŸ¥æ”¯æŒ

## ğŸ“‹ æ›´æ–°æ—¥å¿—

### v1.3.0 (2025-07-09) - å›¾è¡¨æ˜¾ç¤ºä¼˜åŒ–
- ğŸ¨ **å›¾è¡¨æ•°æ®å®Œæ•´æ€§**: ä¿®å¤APIå“åº”ä¸­ç¼ºå¤±çš„price_changeå’Œprice_change_percentå­—æ®µ
- ğŸ¯ **é¢œè‰²é€»è¾‘ç»Ÿä¸€**: å›¾è¡¨Kçº¿ä¸OHLCä¿¡æ¯é¢œè‰²ä¿æŒä¸€è‡´ï¼ˆåŸºäºå½“æ—¥å¼€ç›˜æ”¶ç›˜æ¯”è¾ƒï¼‰
- âœ¨ **å®Œæ•´ä»·æ ¼ä¿¡æ¯**: æ”¶ç›˜ä»·åæ­£ç¡®æ˜¾ç¤ºæ¶¨è·Œé¢å’Œæ¶¨è·Œå¹…ç™¾åˆ†æ¯”
- ğŸ”§ **ç¾è‚¡é¢œè‰²æ ‡å‡†**: éµå¾ªç¾è‚¡ä¹ æƒ¯ï¼ˆç»¿è‰²ä¸Šæ¶¨ï¼Œçº¢è‰²ä¸‹è·Œï¼‰

### v1.2.0 (2025-07-08) - æ¶æ„ç°ä»£åŒ–
- âš¡ **ç°ä»£åŒ–ä¾èµ–æ³¨å…¥**: æ–°å¢ `dependencies.py`ï¼ŒåŸºäº `Annotated` ç±»å‹
- ğŸ›¡ï¸ **ç»Ÿä¸€å¼‚å¸¸å¤„ç†**: æ–°å¢ `exceptions.py`ï¼Œè‡ªå®šä¹‰å¼‚å¸¸ç±»å’Œå…¨å±€å¤„ç†å™¨
- ğŸ”§ **ä¸­é—´ä»¶ç³»ç»Ÿ**: æ–°å¢ `middleware.py`ï¼Œè¯·æ±‚æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ã€å®‰å…¨å¤´
- ğŸ¯ **ç±»å‹å®‰å…¨**: MyPy ç±»å‹æ£€æŸ¥é…ç½®ï¼Œæ–°å¢ `types-redis` æ”¯æŒ
- ğŸ“ˆ **å‘åå…¼å®¹**: ä¿æŒç°æœ‰APIå®Œå…¨å…¼å®¹ï¼Œæ¸è¿›å¼è¿ç§»

### v1.1.0 (2025-07-08) - æ•°æ®ä¼˜åŒ–
- ğŸ”§ **å‘¨çº¿æ•°æ®ä¿®å¤**: æ™ºèƒ½å¤„ç†ä¸å®Œæ•´å½“å‰å‘¨æ•°æ®
- âœ¨ **å¸‚åœºå‡æœŸå¤„ç†**: å¢å¼ºå‡æœŸå’Œäº¤æ˜“æ—¥å†é€»è¾‘
- ğŸ¯ **æ•°æ®å®Œæ•´æ€§**: å®Œå–„å•å…ƒæµ‹è¯•å’Œè¾¹ç•Œæƒ…å†µå¤„ç†

## ğŸ¤ è´¡çŒ® & è‡´è°¢

### è´¡çŒ®æŒ‡å—
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
5. æäº¤ Pull Request

### è‡´è°¢
- [AKShare](https://github.com/akfamily/akshare) - é‡‘èæ•°æ®æ¥å£
- [LangGraph](https://github.com/langchain-ai/langgraph) - AIå·¥ä½œæµæ¡†æ¶
- [TradingView](https://www.tradingview.com/) - ä¸“ä¸šå›¾è¡¨åº“
- [shadcn/ui](https://ui.shadcn.com/) - UIç»„ä»¶åº“

---

<div align="center">

**â­ å¦‚æœé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªæ˜Ÿæ ‡ï¼**

[ğŸ› æŠ¥å‘ŠBug](https://github.com/your-username/StockAIvo/issues) â€¢ [âœ¨ åŠŸèƒ½è¯·æ±‚](https://github.com/your-username/StockAIvo/issues) â€¢ [ğŸ’¬ è®¨è®º](https://github.com/your-username/StockAIvo/discussions)

</div>